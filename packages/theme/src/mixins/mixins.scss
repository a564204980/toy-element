$namespace: "er" !default;
$common-separator: "-" !default;
$element-separator: "__" !default;
$modifier-separator: "--" !default;
$state-prefix: "is-" !default;

$B: null !default;
$E: null !default;

/**
 * 生成 BEM 规范中的 Block (块) 类名
 * 例如：b(button) => .er-button
 * * @param {String} $block - 块名称，如 'button', 'alert'
 */
@mixin b($block) {
  $B: $namespace + $common-separator + $block !global;
  .#{$B} {
    @content;
  }
}

/**
 * 生成 BEM 规范中的 Element (元素) 类名
 * 必须在 Block 混入内部使用
 * 例如：e(icon) => .er-button__icon
 * * @param {String} $element - 元素名称，如 'icon', 'title'
 */
@mixin e($element) {
  // 给全局变量e赋值为$element
  $E: $element !global;
  // & 表示当前父级选择器，例如 .er-button
  $selector: &;

  // @at-root 表示将选择器提升到根级，例如 .er-button__element，扁平兄弟节点
  @at-root {
    // #{} 动态生成选择器名
    #{$selector + $element-separator + $E} {
      // @content 占位符，代表用户调用@include e()时写的内容
      @content;
    }
  }
}

/**
 * 生成 BEM 规范中的 Modifier (修饰符) 类名
 * 适用于主题、尺寸等结构性变体
 * 例如：m(primary) => .er-button--primary
 * * @param {String} $modifier - 修饰符名称，如 'primary', 'small'
 */
@mixin m($modifier) {
  $selector: &;
  @at-root {
    #{$selector + $modifier-separator + $modifier} {
      @content;
    }
  }
}

/**
 * 生成状态类样式
 * 通常用于表示交互状态（如禁用、激活、加载中）
 * 例如：when(disabled) => .is-disabled
 * 注意：状态类通常是挂载在组件根节点上的组合类，或者是全局状态类
 * * @param {String} $state - 状态名称，如 'disabled', 'loading'
 */
@mixin when($state) {
  @at-root {
    &.#{$state-prefix + $state} {
      @content;
    }
  }
}
